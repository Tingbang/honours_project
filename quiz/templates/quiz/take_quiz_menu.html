{% extends "dashboard/base.html" %}
{% block content %}


<div class="row justify-content-center">
    <div class="col-8">
        <h1 class="text-center mod-title"> Quizzes</h1>
        <legend class="text-center text-muted"> A description on how to search for quizzes</legend>
        <div class="input-group select-group">
            {% csrf_token %}
            <input type="text" name="q" id="id_q" class="form-control form-control-sm text-center" placeholder="Search..."/>

    
            </div>
    </div>
</div>

<div class="row justify-content-center">
  <div class="tablewrap">
    <div class="col-12 mt-2 text-center">
        <table class="table table-dark table-striped mx-auto">
            <thead>
                <tr>
                <th class="mod-title" scope="col">Title</th>
                <th class="mod-title" scope="col">Subject</th>
                <th class="mod-title" scope="col">Level</th>
                <th class="mod-title" scope="col">Author</th>
                <th class="mod-title" scope="col">Topic</th>
                <th class="mod-title" scope="col">Modify</th>
                </tr>
            </thead>
            <tbody>
                {% for quiz in quiz%}
                <tr>
                <td>{{quiz.title}}</td>
                <td>{{quiz.subject}}</td>
                <td>{{quiz.level}}</td>
                <td>{{quiz.author}}</td>
                <td>{{quiz.topic}}</td>
                <td><a href="{%url 'active-quiz' quiz_pk=quiz.pk%}">Take</a></td>
                </tr>
                {% endfor %}

            </tbody>
            </table>

            <div class="results" id="results"></div>

    </div><!--End of Column-->
  </div>
</div><!--End of Row-->

{% endblock content %}

{% block javascript %}

<script>
     $('#id_q').keyup(function(){

        $.ajax({
          url: "{% url 'get-search'%}",
          type: "GET",
          data: {
              'search': $('#id_q').val(),
              'csrfmiddlewaretoken': "{{ csrf_token }}"
          },
          success: function(data){
            $('#results').html(data);
            console.log(data);


          },//End of Success
          error: function(errorData){
            console.log("error");
            console.log(errorData);
          }
        })


    });

</script>

{% endblock javascript %}